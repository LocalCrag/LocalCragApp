<ng-container *transloco="let t; read: 'comments'">
  @if (commentsContextService.object) {
    <div class="mt-2 mb-4 block">
      <lc-comment-editor
        *isLoggedIn="true"
        (created)="onCommentCreated($event)"
      ></lc-comment-editor>
    </div>
  }

  <div class="flex gap-3 flex-column mt-2">
    @for (comment of comments; track comment) {
      <lc-comment [comment]="comment"></lc-comment>
    }
  </div>
  @for (
    _ of loadingAdditionalPage === loadingStates.LOADING
      ? [1, 2, 3]
      : loadingFirstPage === loadingStates.LOADING
        ? [1, 2, 3, 4, 5, 6]
        : [];
    track _
  ) {
    <div class="col-12 md:col-6 xl:col-4">
      <lc-gallery-image-skeleton></lc-gallery-image-skeleton>
    </div>
  }
  @if (hasNextPage) {
    <div class="flex justify-content-center mt-5">
      <p-button
        label="{{ t('loadMore') }}"
        (scrolled)="loadNextPage()"
        (click)="loadNextPage()"
        infiniteScroll
        [infiniteScrollDistance]="2"
        [infiniteScrollThrottle]="50"
        [loading]="loadingAdditionalPage === loadingStates.LOADING"
      ></p-button>
    </div>
  }
  @if (
    !(
      loadingAdditionalPage === loadingStates.LOADING ||
      loadingFirstPage === loadingStates.LOADING
    ) && comments.length === 0
  ) {
    <p-message severity="info" icon="pi pi-info-circle">
      {{ t("thisCommentFeedIsEmpty") }}
    </p-message>
  }
</ng-container>
